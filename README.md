# WEB проект в Лицее Академии Яндекса <img src="https://raw.githubusercontent.com/MartinHeinz/MartinHeinz/master/wave.gif" width="30px"/>


## Постановка задачи:
Спроектировать и реализовать WEB сервис с возможностью:
* публикации и просмотра видеоконтента 
* быстрого дублирования видео на разные языки
* последующего встраивания DRM защиты

###
## Микросервисная архитектура созданного приложения.

![alt text](/schema_project.jpg)


## Принцип работы:

6 микросервисов запущены в контейнерах docker и объединены в сеть docker-compose.


### 1. Обратный прокси сервер на основе Nginx:
Внешний интерфейс приложения.

* Принимает http запросы и маршрутизирует их между приложениями на Django и Flask.
* Отдаёт статические файлы

###
### 2. Панель администратора на основе Django-admin:
Сервис для управления контентом и пользователями приложения.

* Предоставляет графический интерфейс для авторизованных пользователей.
* При помощи Django ORM управляет данными в реляционной БД Postgres.
* Выгружает статические файлы в docker-compose volume.

###
### 3. Реляционная база данных Postgres:
Источник правды (source of truth) приложения.

* Хранит исходные данные приложения

###
### 4. Процесс ETL (extract, transform, load):
Сервис преобразует исходные данные в формат для отдачи.
* Перекодирует видео и аудио файлы в стриминговый протокол MPEG-DASH и выгружает их в static
* Денормализует данные в формат JSON и загружает в NoSQL БД ElasticSearch


###
### 5. NoSQL база данных ElasticSearch:
Хранит данные в формате JSON для быстрой отдачи в API.
* Обеспечивает поиск по неполному соответствию на двух языках (ru/en)


###
### 6. Фронтенд на основе Flask:
Сервис отдачи пользовательского контента.
* Получает данные по API из ElasticSearch в формате JSON
* Рендерит HTML шаблоны и отдаёт клиентский контент

## Технологический стек:
1. Для хранения данных (source of truth) использована реляционная база данных Postgres https://www.postgresql.org/


2. Для отдачи данных с возможностью полнотекстового поиска по неполному соответствию использован ElasticSearch https://ru.wikipedia.org/wiki/Elasticsearch


3. Для создания панели администратора использован фреймворк Django (django admin) https://docs.djangoproject.com/en/4.0/ref/contrib/admin/


4. В качестве обратного прокси-сервера использован веб-сервер Nginx https://nginx.org/ru/


5. Для синхронизации и поддержания актуальных данных между Postgres и ElasticSearch создан ETL процесс https://ru.wikipedia.org/wiki/ETL


6. Для сборки HTML шаблонов использован фреймворк Flask https://flask.palletsprojects.com/en/2.1.x/


7. Использован паттерн микросервистной архитектуры


8. Для создания микросервисов использован Docker https://www.docker.com/


9. Для развёртывания 6-ти микросервисов, созданных в данном проекте, использован docker compose https://docs.docker.com/compose/


10. Для конфигурации проекта использован Pydantic https://pydantic-docs.helpmanual.io/


11. Использованы шаблоны Jinja2, Bootstrap, material design style


12. Для обработки аудио и видео использован ffmpeg


13. В качестве линтеров использованы Flake8 и Mypy


14. Для авто тестирования был использован CI с GitHub actions (тесты включаются при каждом «пуше» в репозиторий)


15. Для управления зависимостями в проекте использован менеджер пакетов Poetry
